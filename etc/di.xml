<?xml version="1.0"?>
<!--
/**
 * Shop System Plugins:
 * - Terms of Use can be found under:
 * https://github.com/wirecard/magento2-ee/blob/master/_TERMS_OF_USE
 * - License can be found under:
 * https://github.com/wirecard/magento2-ee/blob/master/LICENSE
 */
-->

<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="Magento\Framework\Phrase\Renderer\Translate">
      <plugin name="wirecard_translation_fallback" type="Wirecard\ElasticEngine\Model\TranslationFallback" />
    </type>

    <virtualType name="PaypalFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::PAYPAL_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">PaypalValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">PaypalValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">PaypalCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::CREDITCARD_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">CreditCardValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">CreditCardValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">CreditCardCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::SEPA_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">SepaValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">SepaValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">SepaCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaCreditFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::SEPACREDIT_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">SepaCreditValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">SepaCreditValidatorPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="SofortFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::SOFORT_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">SofortValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">SofortValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">SofortCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="IdealFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::IDEAL_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">IdealValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">IdealValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">IdealCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="GiropayFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::GIROPAY_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">GiropayValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">GiropayValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">GiropayCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::RATEPAYINVOICE_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">RatepayInvoiceValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">RatepayInvoiceValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">RatepayInvoiceCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="AlipayXBorderFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::ALIPAYXBORDER_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">AlipayXBorderValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">AlipayXBorderValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">AlipayXBorderCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="PoiPiaFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::POIPIA_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">PoiPiaValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">PoiPiaValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">PoiPiaCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::MASTERPASS_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">MasterpassValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">MasterpassValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">MasterpassCommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::PAYBYBANKAPP_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\ConfigurableInfo</argument>
            <argument name="valueHandlerPool" xsi:type="object">PayByBankAppValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">PayByBankAppValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">PayByBankAppCommandPool</argument>
        </arguments>
    </virtualType>

    <!-- Value handlers -->
    <virtualType name="PaypalValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">PaypalConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanCaptureHandler</item>
                <item name="can_void" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PaypalConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardPaypalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">CreditCardConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanCaptureHandler</item>
                <item name="can_void" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardCreditCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">SepaConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanCaptureHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardSepaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaCreditValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">SepaCreditConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaCreditConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardSepaCreditConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SofortValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">SofortConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SofortConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">IdealConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="IdealConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardIdealConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="GiropayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">GiropayConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="GiropayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardGiropayConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">RatepayInvoiceConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanCaptureHandler</item>
                <item name="can_void" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
                <item name="can_cancel" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardRatepayInvoiceConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="AlipayXBorderValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">AlipayXBorderConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="AlipayXBorderConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardAlipayXBorderConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PoiPiaValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">PoiPiaConfigValueHandler</item>
                <item name="can_void" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
                <item name="can_cancel" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PoiPiaConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardPoiPiaConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">MasterpassConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanCaptureHandler</item>
                <item name="can_void" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
                <item name="can_cancel" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardMasterpassConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">PayByBankAppConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanCaptureHandler</item>
                <item name="can_void" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
                <item name="can_cancel" xsi:type="string">Wirecard\ElasticEngine\Gateway\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardPayByBankAppConfig</argument>
        </arguments>
    </virtualType>

    <!-- Configs -->
    <virtualType name="WirecardElasticEngineConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="string">wirecard_elasticengine</argument>
            <argument name="pathPattern" xsi:type="string">%s/%s</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardPaypalConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::PAYPAL_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardCreditCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::CREDITCARD_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardCreditCardVaultConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::CREDITCARD_VAULT_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardSepaConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::SEPA_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardSepaCreditConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::SEPACREDIT_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardSofortConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::SOFORT_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardIdealConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::IDEAL_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardGiropayConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::GIROPAY_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardRatepayInvoiceConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::RATEPAYINVOICE_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardAlipayXBorderConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::ALIPAYXBORDER_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardPoiPiaConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::POIPIA_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardMasterpassConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::MASTERPASS_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="WirecardPayByBankAppConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::PAYBYBANKAPP_CODE</argument>
        </arguments>
    </virtualType>

    <!-- Validator -->
    <virtualType name="PaypalValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">PaypalCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PaypalCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">Magento\Payment\Gateway\Config\Config</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaCreditValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="SofortValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="GiropayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="RatepayInvoiceValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="AlipayXBorderValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="PoiPiaValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="PayByBankAppValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

    <!-- Commands -->
    <virtualType name="PaypalCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">PaypalInitializeCommand</item>
                <item name="capture" xsi:type="string">PaypalCaptureCommand</item>
                <item name="refund" xsi:type="string">PaypalRefundCommand</item>
                <item name="void" xsi:type="string">PaypalVoidCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PaypalCaptureCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCaptureCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayPalTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPaypalConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PaypalRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayPalTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPaypalConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PaypalInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayPalTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPaypalConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PaypalVoidCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardVoidCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayPalTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPaypalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">CreditCardInitializeCommand</item>
                <item name="capture" xsi:type="string">CreditCardCaptureCommand</item>
                <item name="refund" xsi:type="string">CreditCardRefundCommand</item>
                <item name="void" xsi:type="string">CreditCardVoidCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardCaptureCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCaptureCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">CreditCardTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardCreditCardConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">CreditCardTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardCreditCardConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">CreditCardTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardCreditCardConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardVoidCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardVoidCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">CreditCardTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardCreditCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">SepaInitializeCommand</item>
                <item name="capture" xsi:type="string">SepaCaptureCommand</item>
                <item name="refund" xsi:type="string">SepaRefundCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaCaptureCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCaptureCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SepaTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SepaCreditTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaCreditConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="SepaInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SepaTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SofortCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">SofortInitializeCommand</item>
                <item name="refund" xsi:type="string">SofortRefundCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="SofortRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SepaCreditTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaCreditConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="SofortInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SofortTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">IdealInitializeCommand</item>
                <item name="refund" xsi:type="string">IdealRefundCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="IdealRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SepaCreditTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaCreditConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="IdealInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">IdealTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardIdealConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="GiropayCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">GiropayInitializeCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="GiropayInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">GiropayTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardGiropayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="RatepayInvoiceCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">RatepayInvoiceInitializeCommand</item>
                <item name="capture" xsi:type="string">RatepayInvoiceCaptureCommand</item>
                <item name="refund" xsi:type="string">RatepayInvoiceRefundCommand</item>
                <item name="void" xsi:type="string">RatepayInvoiceVoidCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceVoidCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardVoidCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">RatepayInvoiceTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardRatepayInvoiceConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceCaptureCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCaptureCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">RatepayInvoiceTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardRatepayInvoiceConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">RatepayInvoiceTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardRatepayInvoiceConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="RatepayInvoiceInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">RatepayInvoiceTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardRatepayInvoiceConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="AlipayXBorderCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">AlipayXBorderInitializeCommand</item>
                <item name="refund" xsi:type="string">AlipayXBorderRefundCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="AlipayXBorderRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">AlipayXBorderTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardAlipayXBorderConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="AlipayXBorderInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">AlipayXBorderTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardAlipayXBorderConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="PoiPiaCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">PoiPiaInitializeCommand</item>
                <item name="refund" xsi:type="string">PoiPiaRefundCommand</item>
                <item name="void" xsi:type="string">PoiPiaVoidCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PoiPiaRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">SepaCreditTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaCreditConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PoiPiaInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PoiPiaTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPoiPiaConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PoiPiaVoidCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardVoidCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PoiPiaTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPoiPiaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="MasterpassCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">MasterpassInitializeCommand</item>
                <item name="capture" xsi:type="string">MasterpassCaptureCommand</item>
                <item name="refund" xsi:type="string">MasterpassRefundCommand</item>
                <item name="void" xsi:type="string">MasterpassVoidCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">MasterpassTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardMasterpassConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassCaptureCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCaptureCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">MasterpassTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardMasterpassConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">MasterpassTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardMasterpassConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="MasterpassVoidCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardVoidCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">MasterpassTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardMasterpassConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="PayByBankAppCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">PayByBankAppInitializeCommand</item>
                <item name="capture" xsi:type="string">PayByBankAppCaptureCommand</item>
                <item name="refund" xsi:type="string">PayByBankAppRefundCommand</item>
                <item name="void" xsi:type="string">PayByBankAppVoidCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppCaptureCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCaptureCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayByBankAppTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPayByBankAppConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppRefundCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardRefundCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayByBankAppTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPayByBankAppConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppInitializeCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayByBankAppTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPayByBankAppConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="PayByBankAppVoidCommand" type="Wirecard\ElasticEngine\Gateway\Command\WirecardVoidCommand">
        <arguments>
            <argument name="transactionFactory" xsi:type="object">PayByBankAppTransactionFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="handler" xsi:type="object">Wirecard\ElasticEngine\Gateway\Response\ResponseHandler</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPayByBankAppConfig</argument>
        </arguments>
    </virtualType>


    <!-- Wirecard paymentSDK transaction objects -->
    <virtualType name="PayPalTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\PayPalTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\PayPalTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPaypalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\CreditCardTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\CreditCardTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardCreditCardConfig</argument>
            <argument name="threeDsHelper" xsi:type="object">ThreeDsHelper</argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\SepaTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\SepaDirectDebitTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SepaCreditTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\SepaCreditTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\SepaCreditTransferTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSepaCreditConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="SofortTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\SofortTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\SofortTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="IdealTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\IdealTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\IdealTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardIdealConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="GiropayTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\GiropayTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\GiropayTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardGiropayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="RatepayInvoiceTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\RatepayInvoiceTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\RatepayInvoiceTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardRatepayInvoiceConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="AlipayXBorderTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\AlipayXBorderTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\AlipayCrossborderTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardAlipayXBorderConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="PoiPiaTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\PoiPiaTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\PoiPiaTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPoiPiaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="MasterpassTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\MasterpassTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\MasterpassTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardMasterpassConfig</argument>
            <argument name="transactionRepository" xsi:type="object">Magento\Sales\Model\Order\Payment\Transaction\Repository</argument>
            <argument name="searchCriteriaBuilder" xsi:type="object">Magento\Framework\Api\SearchCriteriaBuilder</argument>
            <argument name="filterBuilder" xsi:type="object">Magento\Framework\Api\FilterBuilder</argument>
        </arguments>
    </virtualType>

    <virtualType name="PayByBankAppTransactionFactory" type="Wirecard\ElasticEngine\Gateway\Request\PayByBankAppTransactionFactory">
        <arguments>
            <argument name="transaction" xsi:type="object">Wirecard\PaymentSdk\Transaction\PayByBankAppTransaction</argument>
            <argument name="basketFactory" xsi:type="object">BasketFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="methodConfig" xsi:type="object">WirecardPayByBankAppConfig</argument>
        </arguments>
    </virtualType>

    <!-- Wirecard paymentSDK objects -->
    <virtualType name="BasketFactory" type="Wirecard\ElasticEngine\Gateway\Request\BasketFactory">
        <arguments>
            <argument name="itemFactory" xsi:type="object">Wirecard\ElasticEngine\Gateway\Request\ItemFactory</argument>
        </arguments>
    </virtualType>

    <virtualType name="AccountHolderFactory" type="Wirecard\ElasticEngine\Gateway\Request\AccountHolderFactory">
        <arguments>
            <argument name="addressFactory" xsi:type="object">Wirecard\ElasticEngine\Gateway\Request\AddressFactory</argument>
            <argument name="addressInterfaceValidator" xsi:type="object">Wirecard\ElasticEngine\Gateway\Validator\AddressAdapterInterfaceValidator</argument>
        </arguments>
    </virtualType>

    <virtualType name="ThreeDsHelper" type="Wirecard\ElasticEngine\Gateway\Helper\ThreeDsHelper">
        <arguments>
            <argument name="accountInfoFactory" xsi:type="object">Wirecard\ElasticEngine\Gateway\Request\AccountInfoFactory</argument>
            <argument name="accountHolderFactory" xsi:type="object">AccountHolderFactory</argument>
            <argument name="addressValidator" xsi:type="object">Wirecard\ElasticEngine\Gateway\Validator\QuoteAddressValidator</argument>
        </arguments>
    </virtualType>

    <virtualType name="TransactionServiceFactory" type="Wirecard\ElasticEngine\Gateway\Service\TransactionServiceFactory">
        <arguments>
            <argument name="paymentSdkConfigFactory" xsi:type="object">PaymentSdkConfigFactory</argument>
        </arguments>
    </virtualType>

    <virtualType name="PaymentSdkConfigFactory" type="Wirecard\ElasticEngine\Gateway\Config\PaymentSdkConfigFactory">
        <arguments>
            <argument name="eeConfig" xsi:type="object">WirecardElasticEngineConfig</argument>
            <argument name="methodConfigs" xsi:type="array">
                <item name="paypal" xsi:type="object">WirecardPaypalConfig</item>
                <item name="creditcard" xsi:type="object">WirecardCreditCardConfig</item>
                <item name="sepadirectdebit" xsi:type="object">WirecardSepaConfig</item>
                <item name="sepacredit" xsi:type="object">WirecardSepaCreditConfig</item>
                <item name="sofortbanking" xsi:type="object">WirecardSofortConfig</item>
                <item name="ideal" xsi:type="object">WirecardIdealConfig</item>
                <item name="giropay" xsi:type="object">WirecardGiropayConfig</item>
                <item name="ratepayinvoice" xsi:type="object">WirecardRatepayInvoiceConfig</item>
                <item name="alipay-xborder" xsi:type="object">WirecardAlipayXBorderConfig</item>
                <item name="wiretransfer" xsi:type="object">WirecardPoiPiaConfig</item>
                <item name="masterpass" xsi:type="object">WirecardMasterpassConfig</item>
                <item name="zapp" xsi:type="object">WirecardPayByBankAppConfig</item>
            </argument>
            <argument name="productMetadata" xsi:type="object">Magento\Framework\App\ProductMetadata</argument>
            <argument name="moduleList" xsi:type="object">Magento\Framework\Module\ModuleListInterface</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardCommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">CreditCardCommandPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="config" xsi:type="object">WirecardCreditCardVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">CreditCardVaultValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">CreditCardFacade</argument>
            <argument name="code" xsi:type="const">Wirecard\ElasticEngine\Model\Ui\ConfigProvider::CREDITCARD_VAULT_CODE</argument>
        </arguments>
    </virtualType>

    <virtualType name="CreditCardVaultValueHandler" type="VaultPaymentDefaultValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WirecardCreditCardVaultConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="CreditCardVaultValueHandlerPool" type="VaultPaymentValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">CreditCardVaultValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Wirecard\ElasticEngine\Controller\Frontend\Redirect">
        <arguments>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
        </arguments>
    </type>

    <type name="Wirecard\ElasticEngine\Controller\Frontend\Callback">
        <arguments>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
        </arguments>
    </type>

    <type name="Wirecard\ElasticEngine\Controller\Frontend\Creditcard">
        <arguments>
            <argument name="jsonFactory" xsi:type="object">Magento\Framework\Controller\Result\JsonFactory</argument>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="taxCalculation" xsi:type="object">Magento\Tax\Model\Calculation</argument>
            <argument name="resolver" xsi:type="object">Magento\Framework\Locale\ResolverInterface</argument>
            <argument name="storeManager" xsi:type="object">Magento\Store\Model\StoreManagerInterface</argument>
            <argument name="urlBuilder" xsi:type="object">Magento\Framework\UrlInterface</argument>
            <argument name="paymentHelper" xsi:type="object">Magento\Payment\Helper\Data</argument>
            <argument name="methodConfig" xsi:type="object">WirecardCreditCardConfig</argument>
            <argument name="threeDsHelper" xsi:type="object">ThreeDsHelper</argument>
        </arguments>
    </type>

    <type name="Wirecard\ElasticEngine\Gateway\Model\Notify">
        <arguments>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
            <argument name="paymentTokenFactory" xsi:type="object">Magento\Vault\Model\CreditCardTokenFactory</argument>
        </arguments>
    </type>

    <type name="Wirecard\ElasticEngine\Gateway\Model\TransactionUpdater">
        <arguments>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
        </arguments>
    </type>

    <!-- Wirecard ui objects -->
    <type name="Wirecard\ElasticEngine\Model\Ui\ConfigProvider">
        <arguments>
            <argument name="transactionServiceFactory" xsi:type="object">TransactionServiceFactory</argument>
        </arguments>
    </type>
    <type name="Wirecard\ElasticEngine\Block\Checkout\SepaMandateBlock">
        <arguments>
            <argument name="methodConfig" xsi:type="object">WirecardSepaConfig</argument>
        </arguments>
    </type>
    <type name="Wirecard\ElasticEngine\Block\Checkout\PoiPiaBlock">
        <arguments>
            <argument name="methodConfig" xsi:type="object">WirecardPoiPiaConfig</argument>
        </arguments>
    </type>
</config>
